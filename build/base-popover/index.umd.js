(function(C,b){typeof exports=="object"&&typeof module<"u"?b(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],b):(C=typeof globalThis<"u"?globalThis:C||self,b(C.index={},C.Vue))})(this,function(C,b){"use strict";const ht={modelValue:{type:Boolean,default:!1},host:{type:Object,default:()=>null},showArrow:{type:Boolean,default:!1},placement:{type:String,default:"bottom"}};function D(t){return t.split("-")[1]}function Y(t){return t==="y"?"height":"width"}function F(t){return t.split("-")[0]}function M(t){return["top","bottom"].includes(F(t))?"x":"y"}function Q(t,e,n){let{reference:i,floating:o}=t;const r=i.x+i.width/2-o.width/2,l=i.y+i.height/2-o.height/2,s=M(e),c=Y(s),f=i[c]/2-o[c]/2,d=F(e),a=s==="x";let u;switch(d){case"top":u={x:r,y:i.y-o.height};break;case"bottom":u={x:r,y:i.y+i.height};break;case"right":u={x:i.x+i.width,y:l};break;case"left":u={x:i.x-o.width,y:l};break;default:u={x:i.x,y:i.y}}switch(D(e)){case"start":u[s]-=f*(n&&a?-1:1);break;case"end":u[s]+=f*(n&&a?-1:1);break}return u}const wt=async(t,e,n)=>{const{placement:i="bottom",strategy:o="absolute",middleware:r=[],platform:l}=n,s=r.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(e));if(process.env.NODE_ENV!=="production"){if(l==null&&console.error(["Floating UI: `platform` property was not passed to config. If you","want to use Floating UI on the web, install @floating-ui/dom","instead of the /core package. Otherwise, you can create your own","`platform`: https://floating-ui.com/docs/platform"].join(" ")),s.filter(v=>{let{name:y}=v;return y==="autoPlacement"||y==="flip"}).length>1)throw new Error(["Floating UI: duplicate `flip` and/or `autoPlacement` middleware","detected. This will lead to an infinite loop. Ensure only one of","either has been passed to the `middleware` array."].join(" "));(!t||!e)&&console.error(["Floating UI: The reference and/or floating element was not defined","when `computePosition()` was called. Ensure that both elements have","been created and can be measured."].join(" "))}let f=await l.getElementRects({reference:t,floating:e,strategy:o}),{x:d,y:a}=Q(f,i,c),u=i,h={},p=0;for(let v=0;v<s.length;v++){const{name:y,fn:m}=s[v],{x:w,y:x,data:O,reset:g}=await m({x:d,y:a,initialPlacement:i,placement:u,strategy:o,middlewareData:h,rects:f,platform:l,elements:{reference:t,floating:e}});if(d=w??d,a=x??a,h={...h,[y]:{...h[y],...O}},process.env.NODE_ENV!=="production"&&p>50&&console.warn(["Floating UI: The middleware lifecycle appears to be running in an","infinite loop. This is usually caused by a `reset` continually","being returned without a break condition."].join(" ")),g&&p<=50){p++,typeof g=="object"&&(g.placement&&(u=g.placement),g.rects&&(f=g.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:o}):g.rects),{x:d,y:a}=Q(f,u,c)),v=-1;continue}}return{x:d,y:a,placement:u,strategy:o,middlewareData:h}};function yt(t){return{top:0,right:0,bottom:0,left:0,...t}}function Z(t){return typeof t!="number"?yt(t):{top:t,right:t,bottom:t,left:t}}function W(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function xt(t,e){var n;e===void 0&&(e={});const{x:i,y:o,platform:r,rects:l,elements:s,strategy:c}=t,{boundary:f="clippingAncestors",rootBoundary:d="viewport",elementContext:a="floating",altBoundary:u=!1,padding:h=0}=e,p=Z(h),y=s[u?a==="floating"?"reference":"floating":a],m=W(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(y)))==null||n?y:y.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(s.floating)),boundary:f,rootBoundary:d,strategy:c})),w=a==="floating"?{...l.floating,x:i,y:o}:l.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(s.floating)),O=await(r.isElement==null?void 0:r.isElement(x))?await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1}:{x:1,y:1},g=W(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:x,strategy:c}):w);return process.env.NODE_ENV,{top:(m.top-g.top+p.top)/O.y,bottom:(g.bottom-m.bottom+p.bottom)/O.y,left:(m.left-g.left+p.left)/O.x,right:(g.right-m.right+p.right)/O.x}}const vt=Math.min,bt=Math.max;function Ot(t,e,n){return bt(t,vt(e,n))}const Et=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:i=0}=t||{},{x:o,y:r,placement:l,rects:s,platform:c}=e;if(n==null)return process.env.NODE_ENV!=="production"&&console.warn("Floating UI: No `element` was passed to the `arrow` middleware."),{};const f=Z(i),d={x:o,y:r},a=M(l),u=Y(a),h=await c.getDimensions(n),p=a==="y"?"top":"left",v=a==="y"?"bottom":"right",y=s.reference[u]+s.reference[a]-d[a]-s.floating[u],m=d[a]-s.reference[a],w=await(c.getOffsetParent==null?void 0:c.getOffsetParent(n));let x=w?a==="y"?w.clientHeight||0:w.clientWidth||0:0;x===0&&(x=s.floating[u]);const O=y/2-m/2,g=f[p],V=x-h[u]-f[v],R=x/2-h[u]/2+O,X=Ot(g,R,V),$=D(l)!=null&&R!=X&&s.reference[u]/2-(R<g?f[p]:f[v])-h[u]/2<0?R<g?g-R:V-R:0;return{[a]:d[a]-$,data:{[a]:X,centerOffset:R-X}}}}),tt=["top","right","bottom","left"].reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),At={left:"right",right:"left",bottom:"top",top:"bottom"};function et(t){return t.replace(/left|right|bottom|top/g,e=>At[e])}function Rt(t,e,n){n===void 0&&(n=!1);const i=D(t),o=M(t),r=Y(o);let l=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(l=et(l)),{main:l,cross:et(l)}}const Tt={start:"end",end:"start"};function Ct(t){return t.replace(/start|end/g,e=>Tt[e])}function Lt(t,e,n){return(t?[...n.filter(o=>D(o)===t),...n.filter(o=>D(o)!==t)]:n.filter(o=>F(o)===o)).filter(o=>t?D(o)===t||(e?Ct(o)!==o:!1):!0)}const Pt=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,i,o;const{rects:r,middlewareData:l,placement:s,platform:c,elements:f}=e,{alignment:d,allowedPlacements:a=tt,autoAlignment:u=!0,...h}=t,p=d!==void 0||a===tt?Lt(d||null,u,a):a,v=await xt(e,h),y=((n=l.autoPlacement)==null?void 0:n.index)||0,m=p[y];if(m==null)return{};const{main:w,cross:x}=Rt(m,r,await(c.isRTL==null?void 0:c.isRTL(f.floating)));if(s!==m)return{reset:{placement:p[0]}};const O=[v[F(m)],v[w],v[x]],g=[...((i=l.autoPlacement)==null?void 0:i.overflows)||[],{placement:m,overflows:O}],V=p[y+1];if(V)return{data:{index:y+1,overflows:g},reset:{placement:V}};const R=g.slice().sort(($,J)=>$.overflows[0]-J.overflows[0]),G=((o=R.find($=>{let{overflows:J}=$;return J.every(Xt=>Xt<=0)}))==null?void 0:o.placement)||R[0].placement;return G!==s?{data:{index:y+1,overflows:g},reset:{placement:G}}:{}}}};async function St(t,e){const{placement:n,platform:i,elements:o}=t,r=await(i.isRTL==null?void 0:i.isRTL(o.floating)),l=F(n),s=D(n),c=M(n)==="x",f=["left","top"].includes(l)?-1:1,d=r&&c?-1:1,a=typeof e=="function"?e(t):e;let{mainAxis:u,crossAxis:h,alignmentAxis:p}=typeof a=="number"?{mainAxis:a,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...a};return s&&typeof p=="number"&&(h=s==="end"?p*-1:p),c?{x:h*d,y:u*f}:{x:u*f,y:h*d}}const Dt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,o=await St(e,t);return{x:n+o.x,y:i+o.y,data:o}}}};function E(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function A(t){return E(t).getComputedStyle(t)}function L(t){return ot(t)?(t.nodeName||"").toLowerCase():""}let j;function nt(){if(j)return j;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(j=t.brands.map(e=>e.brand+"/"+e.version).join(" "),j):navigator.userAgent}function T(t){return t instanceof E(t).HTMLElement}function P(t){return t instanceof E(t).Element}function ot(t){return t instanceof E(t).Node}function it(t){if(typeof ShadowRoot>"u")return!1;const e=E(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function I(t){const{overflow:e,overflowX:n,overflowY:i,display:o}=A(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(o)}function Vt(t){return["table","td","th"].includes(L(t))}function z(t){const e=/firefox/i.test(nt()),n=A(t),i=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||(i?i!=="none":!1)||e&&n.willChange==="filter"||e&&(n.filter?n.filter!=="none":!1)||["transform","perspective"].some(o=>n.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{const r=n.contain;return r!=null?r.includes(o):!1})}function rt(){return!/^((?!chrome|android).)*safari/i.test(nt())}function q(t){return["html","body","#document"].includes(L(t))}const st=Math.min,B=Math.max,H=Math.round;function lt(t){const e=A(t);let n=parseFloat(e.width),i=parseFloat(e.height);const o=t.offsetWidth,r=t.offsetHeight,l=H(n)!==o||H(i)!==r;return l&&(n=o,i=r),{width:n,height:i,fallback:l}}function ct(t){return P(t)?t:t.contextElement}const at={x:1,y:1};function N(t){const e=ct(t);if(!T(e))return at;const n=e.getBoundingClientRect(),{width:i,height:o,fallback:r}=lt(e);let l=(r?H(n.width):n.width)/i,s=(r?H(n.height):n.height)/o;return(!l||!Number.isFinite(l))&&(l=1),(!s||!Number.isFinite(s))&&(s=1),{x:l,y:s}}function k(t,e,n,i){var o,r;e===void 0&&(e=!1),n===void 0&&(n=!1);const l=t.getBoundingClientRect(),s=ct(t);let c=at;e&&(i?P(i)&&(c=N(i)):c=N(t));const f=s?E(s):window,d=!rt()&&n;let a=(l.left+(d&&((o=f.visualViewport)==null?void 0:o.offsetLeft)||0))/c.x,u=(l.top+(d&&((r=f.visualViewport)==null?void 0:r.offsetTop)||0))/c.y,h=l.width/c.x,p=l.height/c.y;if(s){const v=E(s),y=i&&P(i)?E(i):i;let m=v.frameElement;for(;m&&i&&y!==v;){const w=N(m),x=m.getBoundingClientRect(),O=getComputedStyle(m);x.x+=(m.clientLeft+parseFloat(O.paddingLeft))*w.x,x.y+=(m.clientTop+parseFloat(O.paddingTop))*w.y,a*=w.x,u*=w.y,h*=w.x,p*=w.y,a+=x.x,u+=x.y,m=E(m).frameElement}}return{width:h,height:p,top:u,right:a+h,bottom:u+p,left:a,x:a,y:u}}function S(t){return((ot(t)?t.ownerDocument:t.document)||window.document).documentElement}function U(t){return P(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ft(t){return k(S(t)).left+U(t).scrollLeft}function Nt(t,e,n){const i=T(e),o=S(e),r=k(t,!0,n==="fixed",e);let l={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(i||!i&&n!=="fixed")if((L(e)!=="body"||I(o))&&(l=U(e)),T(e)){const c=k(e,!0);s.x=c.x+e.clientLeft,s.y=c.y+e.clientTop}else o&&(s.x=ft(o));return{x:r.left+l.scrollLeft-s.x,y:r.top+l.scrollTop-s.y,width:r.width,height:r.height}}function _(t){if(L(t)==="html")return t;const e=t.assignedSlot||t.parentNode||(it(t)?t.host:null)||S(t);return it(e)?e.host:e}function ut(t){return!T(t)||A(t).position==="fixed"?null:t.offsetParent}function Ft(t){let e=_(t);for(;T(e)&&!q(e);){if(z(e))return e;e=_(e)}return null}function dt(t){const e=E(t);let n=ut(t);for(;n&&Vt(n)&&A(n).position==="static";)n=ut(n);return n&&(L(n)==="html"||L(n)==="body"&&A(n).position==="static"&&!z(n))?e:n||Ft(t)||e}function Bt(t){return lt(t)}function kt(t){let{rect:e,offsetParent:n,strategy:i}=t;const o=T(n),r=S(n);if(n===r)return e;let l={scrollLeft:0,scrollTop:0},s={x:1,y:1};const c={x:0,y:0};if((o||!o&&i!=="fixed")&&((L(n)!=="body"||I(r))&&(l=U(n)),T(n))){const f=k(n);s=N(n),c.x=f.x+n.clientLeft,c.y=f.y+n.clientTop}return{width:e.width*s.x,height:e.height*s.y,x:e.x*s.x-l.scrollLeft*s.x+c.x,y:e.y*s.y-l.scrollTop*s.y+c.y}}function _t(t,e){const n=E(t),i=S(t),o=n.visualViewport;let r=i.clientWidth,l=i.clientHeight,s=0,c=0;if(o){r=o.width,l=o.height;const f=rt();(f||!f&&e==="fixed")&&(s=o.offsetLeft,c=o.offsetTop)}return{width:r,height:l,x:s,y:c}}function $t(t){var e;const n=S(t),i=U(t),o=(e=t.ownerDocument)==null?void 0:e.body,r=B(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),l=B(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0);let s=-i.scrollLeft+ft(t);const c=-i.scrollTop;return A(o||n).direction==="rtl"&&(s+=B(n.clientWidth,o?o.clientWidth:0)-r),{width:r,height:l,x:s,y:c}}function pt(t){const e=_(t);return q(e)?t.ownerDocument.body:T(e)&&I(e)?e:pt(e)}function mt(t,e){var n;e===void 0&&(e=[]);const i=pt(t),o=i===((n=t.ownerDocument)==null?void 0:n.body),r=E(i);return o?e.concat(r,r.visualViewport||[],I(i)?i:[]):e.concat(i,mt(i))}function Mt(t,e){const n=k(t,!0,e==="fixed"),i=n.top+t.clientTop,o=n.left+t.clientLeft,r=T(t)?N(t):{x:1,y:1},l=t.clientWidth*r.x,s=t.clientHeight*r.y,c=o*r.x,f=i*r.y;return{top:f,left:c,right:c+l,bottom:f+s,x:c,y:f,width:l,height:s}}function gt(t,e,n){return e==="viewport"?W(_t(t,n)):P(e)?Mt(e,n):W($t(S(t)))}function Wt(t,e){const n=e.get(t);if(n)return n;let i=mt(t).filter(s=>P(s)&&L(s)!=="body"),o=null;const r=A(t).position==="fixed";let l=r?_(t):t;for(;P(l)&&!q(l);){const s=A(l),c=z(l);(r?!c&&!o:!c&&s.position==="static"&&!!o&&["absolute","fixed"].includes(o.position))?i=i.filter(d=>d!==l):o=s,l=_(l)}return e.set(t,i),i}function jt(t){let{element:e,boundary:n,rootBoundary:i,strategy:o}=t;const l=[...n==="clippingAncestors"?Wt(e,this._c):[].concat(n),i],s=l[0],c=l.reduce((f,d)=>{const a=gt(e,d,o);return f.top=B(a.top,f.top),f.right=st(a.right,f.right),f.bottom=st(a.bottom,f.bottom),f.left=B(a.left,f.left),f},gt(e,s,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}const It={getClippingRect:jt,convertOffsetParentRelativeRectToViewportRelativeRect:kt,isElement:P,getDimensions:Bt,getOffsetParent:dt,getDocumentElement:S,getScale:N,async getElementRects(t){let{reference:e,floating:n,strategy:i}=t;const o=this.getOffsetParent||dt,r=this.getDimensions;return{reference:Nt(e,await o(n),i),floating:{x:0,y:0,...await r(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>A(t).direction==="rtl"},Ht=(t,e,n)=>{const i=new Map,o={platform:It,...n},r={...o.platform,_c:i};return wt(t,e,{...o,platform:r})},zt="",qt="",K=b.defineComponent({name:"SBasePopover",props:ht,emits:["update:modelValue"],setup(t,{slots:e,attrs:n}){const{host:i,modelValue:o,showArrow:r,placement:l}=b.toRefs(t),s=b.ref(),c=b.ref(),f=()=>{const a=[];r.value&&(a.push(Dt(8)),a.push(Et({element:s.value}))),l.value||a.push(Pt()),Ht(i.value,c.value,{middleware:a,placement:l.value||"bottom"}).then(({x:u,y:h,middlewareData:p,placement:v})=>{if(Object.assign(c.value.style,{left:`${u}px`,top:`${h}px`}),r.value){const{x:y,y:m}=p.arrow,w=v.split("-")[0],x={top:"bottom",right:"left",bottom:"top",left:"right"}[w],O=["top","right","bottom","left"],g=O.indexOf(w)-1,V=O[g<0?g+4:g];Object.assign(s.value.style,{left:`${y}px`,top:`${m}px`,[x]:"-4px",[`border-${w}-color`]:"transparent",[`border-${V}-color`]:"transparent"})}})},d=new MutationObserver(()=>f());return b.watch(o,a=>{a?(b.nextTick(f),i.value&&d.observe(i.value,{attributes:!0}),window.addEventListener("resize",f),window.addEventListener("scroll",f)):(d.disconnect(),window.removeEventListener("resize",f),window.removeEventListener("scroll",f))},{immediate:!0}),b.onUnmounted(()=>{d.disconnect(),window.removeEventListener("resize",f),window.removeEventListener("scroll",f)}),()=>{var a;return b.createVNode(b.Fragment,null,[o.value&&b.createVNode("div",b.mergeProps({ref:c,class:"s-base-popover"},n),[(a=e.default)==null?void 0:a.call(e),r.value&&b.createVNode("div",{class:"s-base-popover__arrow",ref:s},null)])])}}}),Ut={install(t){t.component(K.name,K)}};C.BasePopover=K,C.default=Ut,Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
