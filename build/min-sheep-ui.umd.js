(function(_,d){typeof exports=="object"&&typeof module<"u"?d(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],d):(_=typeof globalThis<"u"?globalThis:_||self,d(_.MinSheepUI={},_.Vue))})(this,function(_,d){"use strict";const he={type:{type:String,default:"secondary"},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1},block:{type:Boolean,default:!1}},xt="",Nt="",z=d.defineComponent({name:"SButton",props:he,setup(r,{slots:e}){const{type:t,size:n,disabled:i,block:a}=d.toRefs(r),o=a.value?"s-btn--block":"";return()=>d.createVNode("button",{disabled:i.value,class:`s-btn s-btn--${t.value} s-btn--${n.value} ${o}`},[e.default?e.default():"按钮"])}}),ye={install(r){r.component(z.name,z)}};function B(r,e=0,t=[]){return e++,r.reduce((n,i)=>{const a={...i};a.level=e,t.length>0&&t[t.length-1].level>=e&&t.pop(),t.push(a);const o=t[t.length-2];if(o&&(a.parentId=o.id),a.children){const s=B(a.children,e,t);return delete a.children,n.concat(a,s)}else return a.isLeaf===void 0&&(a.isLeaf=!0),n.concat(a)},[])}function ve(r,{getChildren:e}){return{toggleCheckNode:n=>{n.checked=!n.checked,e(n).forEach(s=>{s.checked=n.checked});const i=r.value.find(s=>s.id===n.parentId);if(!i)return;const a=e(i,!1),o=a.filter(s=>s.checked);o.length===a.length?i.checked=!0:o.length===0&&(i.checked=!1)}}}function be(r){const e=d.computed(()=>{let s=[];const l=[];for(const p of r.value)s.map(c=>c.id).includes(p.id)||(p.expanded!==!0&&(s=t(p)),l.push(p));return l}),t=(s,l=!0)=>{const p=[],c=r.value.findIndex(h=>h.id===s.id);for(let h=c+1;h<r.value.length&&s.level<r.value[h].level;h++)(l||s.level===r.value[h].level-1)&&p.push(r.value[h]);return p},n=(s,l=[])=>{const p=t(s,!1);return l.push(...p),p.forEach(c=>{c.expanded&&n(c,l)}),l};return{expandedTree:e,getChildren:t,getChildrenExpanded:n,getIndex:s=>s?r.value.findIndex(l=>l.id===s.id):-1,getNode:s=>r.value.find(l=>l.id===s.id),getParent:s=>r.value.find(l=>l.id===s.parentId)}}const H={dropPrev:"s-tree__node--drop-prev",dropNext:"s-tree__node--drop-next",dropInner:"s-tree__node--drop-inner"};function xe(r,e,{getChildren:t,getParent:n}){const i=d.reactive({dropType:void 0,draggingNode:null,draggingTreeNode:null}),a=d.computed(()=>e.value.reduce((u,g)=>({...u,[g.id]:g}),{})),o=u=>{u==null||u.classList.remove(...Object.values(H))},s=(u,g)=>{var x;const f=(x=a.value[u])==null?void 0:x.parentId;return f===g?!0:f!==void 0?s(f,g):!1},l=()=>{i.dropType=void 0,i.draggingNode=null,i.draggingTreeNode=null},p=(u,g)=>{var f;u.stopPropagation(),i.draggingNode=u.target,i.draggingTreeNode=g,(f=u.dataTransfer)==null||f.setData("dragNodeId",g.id)},c=u=>{if(u.preventDefault(),u.stopPropagation(),!!i.draggingNode&&r){if(u.dataTransfer&&(u.dataTransfer.dropEffect="move"),!e)return;let g={};typeof r=="object"?g=r:r===!0&&(g={dropInner:!0});const{dropPrev:f,dropNext:x,dropInner:m}=g;let y;const N=f?m?.25:x?.45:1:-1,w=x?m?.75:f?.55:0:1,V=u.currentTarget,F=V==null?void 0:V.getBoundingClientRect(),S=u.clientY-((F==null?void 0:F.top)||0);if(S<((F==null?void 0:F.height)||0)*N?y="dropPrev":S>((F==null?void 0:F.height)||0)*w?y="dropNext":m?y="dropInner":y=void 0,y){const D=V==null?void 0:V.classList;D&&(D.contains(H[y])||(o(V),D.add(H[y])))}else o(V);i.dropType=y}},h=u=>{u.stopPropagation(),i.draggingNode&&o(u.currentTarget)},b=(u,g)=>{var x;if(u.preventDefault(),u.stopPropagation(),o(u.currentTarget),!i.draggingNode||!r)return;const f=(x=u.dataTransfer)==null?void 0:x.getData("dragNodeId");if(f){const m=s(g.id,f);if(f===g.id||m)return;i.dropType&&P(f,g),l()}};function P(u,g){const f=e.value.find(x=>x.id===u);if(f){let x;const m=t(f),y=n(f);if(i.dropType==="dropInner"){x={...f,parentId:g.id,level:g.level+1};const N=e.value.indexOf(g);e.value.splice(N+1,0,x),g.isLeaf=void 0;const w=e.value.indexOf(f);e.value.splice(w,1)}else if(i.dropType==="dropNext"){x={...f,parentId:g.parentId,level:g.level};const N=e.value.indexOf(g),w=t(g,!0).length;e.value.splice(N+w+1,0,x);const V=e.value.indexOf(f);e.value.splice(V,1)}else if(i.dropType==="dropPrev"){x={...f,parentId:g.parentId,level:g.level};const N=e.value.indexOf(g);e.value.splice(N,0,x);const w=e.value.indexOf(f);e.value.splice(w,1)}i.dropType="dropInner",m.forEach(N=>P(N.id,x)),y&&t(y).length===0&&(y.isLeaf=!0)}}return{onDragstart:p,onDragover:c,onDragleave:h,onDrop:b,onDragend:u=>{u.preventDefault(),u.stopPropagation(),l()}}}function Ne(r,{getNode:e,getIndex:t,getChildren:n},{emit:i}){const a=p=>{const c=e(p);c&&c.isLeaf===!1&&!c.childNodeCount&&(c.loading=!0,i("lazy-load",p,o))},o=p=>{const c=e(p.node);if(c){c.loading=!1;const h=d.ref(B(p.treeItems,c.level));s(c,h),l(c,h);const b=n(c);c.childNodeCount=b.length}},s=(p,c)=>{c.value.forEach(h=>{h.level-1===p.level&&!h.parentId&&(h.parentId=p.id)})},l=(p,c)=>{const h=t(p);h&&r.value.splice(h+1,0,...c.value)};return{lazyLoadNodes:a}}function we(r=8){const e="abcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let n=0;n<r;n++)t+=e[parseInt((Math.random()*e.length).toString())];return t}function Pe(r,{getChildren:e,getIndex:t}){return{append:(a,o)=>{const s=e(a,!1),l=s[s.length-1];let p=t(a)+1;l&&(p=t(l)+1),a.expanded=!0,a.isLeaf=!1;const c=d.ref({...o,level:a.level+1,parentId:a.id,isLeaf:!0});c.value.id===void 0&&(c.value.id=we()),r.value.splice(p,0,c.value)},remove:a=>{const o=e(a).map(s=>s.id);r.value=r.value.filter(s=>s.id!==a.id&&!o.includes(s.id))}}}function qe(r,e,t,n){const{lazyLoadNodes:i}=n;return{toggleNode:o=>{const s=r.value.find(l=>l.id===o.id);s&&(s.expanded=!s.expanded,s.expanded&&i(s))}}}function Fe(r,e,t){const n=d.unref(r),i=d.ref(B(n)),a=be(i),o=[qe,ve,Pe],s=Ne(i,a,t),l=xe(e.draggable,i,a);return{...o.reduce((c,h)=>({...c,...h(i,a,t,s)}),{}),...a,...l,treeData:i}}const ne={data:{type:Object,required:!0},lineable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},operable:{type:Boolean,default:!1},draggable:{type:[Boolean,Object],default:!1},height:{type:Number},itemHeight:{type:Number,default:30}},Ve={...ne,treeNode:{type:Object,required:!0}},re=32,ie=24,Ie=d.defineComponent({name:"STreeNode",props:Ve,setup(r,{slots:e}){const{lineable:t,checkable:n,treeNode:i,operable:a,draggable:o}=d.toRefs(r),{toggleCheckNode:s,getChildrenExpanded:l,append:p,remove:c,onDragend:h,onDragleave:b,onDragover:P,onDragstart:I,onDrop:u}=d.inject("TREE_UTILS"),g=d.ref(!1),f=()=>{g.value?g.value=!1:g.value=!0};let x={};return o.value&&(x={draggable:!0,onDragend:m=>h(m),onDragleave:m=>b(m),onDragover:m=>P(m),onDragstart:m=>I(m,i.value),onDrop:m=>u(m,i.value)}),()=>{var m,y,N;return d.createVNode("div",{class:"s-tree__node hover:bg-slate-300 relative leading-8",style:{paddingLeft:`${ie*(i.value.level-1)}px`},onMouseenter:f,onMouseleave:f},[!i.value.isLeaf&&i.value.expanded&&t.value&&d.createVNode("span",{class:"s-tree-node__vline absolute w-px bg-slate-300",style:{height:`${re*l(i.value).length}px`,left:`${ie*(i.value.level-1)+9}px`,top:`${re}px`}},null),d.createVNode("div",d.mergeProps({class:"s-tree__node--content"},x),[i.value.isLeaf?d.createVNode("span",{style:{display:"inline-block",width:"18px"}},null):(m=e.icon)==null?void 0:m.call(e),n.value&&d.withDirectives(d.createVNode("input",{type:"checkbox","onUpdate:modelValue":w=>i.value.checked=w,onClick:()=>{s(i.value)}},null),[[d.vModelCheckbox,i.value.checked]]),(y=e.content)==null?void 0:y.call(e),a.value&&g.value&&d.createVNode("span",{class:"inline-flex ml-1"},[d.createVNode("svg",{onClick:()=>{p(i.value,{label:"新节点"})},viewBox:"0 0 1024 1024",width:"14",height:"14",class:"cursor-pointer"},[d.createVNode("path",{d:"M590.769231 571.076923h324.923077c15.753846 0 29.538462-13.784615 29.538461-29.538461v-59.076924c0-15.753846-13.784615-29.538462-29.538461-29.538461H590.769231c-11.815385 0-19.692308-7.876923-19.692308-19.692308V108.307692c0-15.753846-13.784615-29.538462-29.538461-29.538461h-59.076924c-15.753846 0-29.538462 13.784615-29.538461 29.538461V433.230769c0 11.815385-7.876923 19.692308-19.692308 19.692308H108.307692c-15.753846 0-29.538462 13.784615-29.538461 29.538461v59.076924c0 15.753846 13.784615 29.538462 29.538461 29.538461H433.230769c11.815385 0 19.692308 7.876923 19.692308 19.692308v324.923077c0 15.753846 13.784615 29.538462 29.538461 29.538461h59.076924c15.753846 0 29.538462-13.784615 29.538461-29.538461V590.769231c0-11.815385 7.876923-19.692308 19.692308-19.692308z"},null)]),d.createVNode("svg",{onClick:()=>{c(i.value)},viewBox:"0 0 1024 1024",width:"14",height:"14",class:"cursor-pointer ml-1"},[d.createVNode("path",{d:"M610.461538 500.184615l256-257.96923c11.815385-11.815385 11.815385-29.538462 0-41.353847l-39.384615-41.353846c-11.815385-11.815385-29.538462-11.815385-41.353846 0L527.753846 417.476923c-7.876923 7.876923-19.692308 7.876923-27.569231 0L242.215385 157.538462c-11.815385-11.815385-29.538462-11.815385-41.353847 0l-41.353846 41.353846c-11.815385 11.815385-11.815385 29.538462 0 41.353846l257.969231 257.969231c7.876923 7.876923 7.876923 19.692308 0 27.56923L157.538462 785.723077c-11.815385 11.815385-11.815385 29.538462 0 41.353846l41.353846 41.353846c11.815385 11.815385 29.538462 11.815385 41.353846 0L498.215385 610.461538c7.876923-7.876923 19.692308-7.876923 27.56923 0l257.969231 257.969231c11.815385 11.815385 29.538462 11.815385 41.353846 0L866.461538 827.076923c11.815385-11.815385 11.815385-29.538462 0-41.353846L610.461538 527.753846c-7.876923-7.876923-7.876923-19.692308 0-27.569231z"},null)])]),i.value.loading&&((N=e.loading)==null?void 0:N.call(e))])])}}}),Oe=(r,{emit:e})=>d.createVNode("svg",{style:{width:"18px",height:"18px",display:"inline-block",transform:r.expanded?"rotate(90deg)":""},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",onClick:()=>e("onClick")},[d.createVNode("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null)]),wt="",_e={data:{type:Array,default:[]},itemHeight:{type:Number,default:22},component:{type:String,default:"div"}},Pt="",Ee=d.defineComponent({name:"SVirtualList",props:_e,setup(r,{slots:e}){const{data:t,itemHeight:n,component:i}=d.toRefs(r),a=d.ref(),o=d.ref(0),s=d.ref(0),l=d.ref(0),p=d.computed(()=>Math.ceil(o.value/n.value)),c=d.computed(()=>t.value.slice(l.value,Math.min(l.value+p.value,t.value.length)));d.onMounted(()=>{var b;o.value=(b=a.value)==null?void 0:b.clientHeight});const h=b=>{const{scrollTop:P}=b.target;l.value=Math.floor(P/n.value),s.value=P-P%n.value};return()=>d.createVNode(i.value,{class:"s-virtual-list__container",ref:a,onScroll:h},{default:()=>[d.createVNode("div",{class:"s-virtual-list__blank",style:{height:`${t.value.length*n.value}px`}},null),d.createVNode("div",{class:"s-virtual-list",style:{transform:`translate3d(0, ${s.value}px, 0)`}},[c.value.map((b,P)=>{var I;return(I=e.default)==null?void 0:I.call(e,{item:b,index:P})})])]})}}),U=d.defineComponent({name:"STree",props:ne,emits:["lazy-load"],setup(r,e){const{data:t,height:n,itemHeight:i}=d.toRefs(r),{slots:a}=e,o=Fe(t,r,e);return d.provide("TREE_UTILS",o),()=>{const s=l=>d.createVNode(Ie,d.mergeProps(r,{treeNode:l}),{content:()=>a.content?a.content(l):l.label,icon:()=>a.icon?a.icon({nodeData:l,toggleNode:o.toggleNode}):d.createVNode(Oe,{expanded:!!l.expanded,onClick:()=>o.toggleNode(l)},null),loading:()=>a.loading?a.loading({nodeData:o}):d.createVNode("span",{class:"ml-1"},[d.createTextVNode("loading...")])});return d.createVNode("div",{class:"s-tree"},[n!=null&&n.value?d.createVNode("div",{style:{height:`${n.value}px`}},[d.createVNode(Ee,{data:o.expandedTree.value,itemHeight:i.value},{default:({item:l})=>s(l)})]):o.expandedTree.value.map(l=>s(l))])}}}),Te={install(r){r.component(U.name,U)}},ae={total:{type:Number,default:0},pageSize:{type:Number,default:10},pagerCount:{type:Number,default:7},modelValue:{type:Number,default:1}},qt="";function Se(r=1){const e=d.ref(r),t=o=>{e.value=o},n=o=>{e.value+=o};return{pageIndex:e,setPageIndex:t,jumpPage:n,prevPage:()=>n(-1),nextPage:()=>n(1)}}const Ae=(r,e,t)=>{const n=Array.from(Array(r).keys());if(r<=t)return n.slice(2,r);{const i=Math.ceil(t/2);return e<=i?n.slice(2,t):e>=r-i+1?n.slice(r-t+2,r):n.slice(e-i+2,e+i-1)}},je=ae,Y=d.defineComponent({name:"SPager",props:je,setup(r){const{total:e,pageSize:t,pagerCount:n}=d.toRefs(r),i=d.computed(()=>Math.ceil(e.value/t.value)),{pageIndex:a,setPageIndex:o,jumpPage:s,prevPage:l,nextPage:p}=Se(),c=d.computed(()=>Ae(i.value,a.value,n.value));return{totalPage:i,pageIndex:a,setPageIndex:o,jumpPage:s,prevPage:l,nextPage:p,centerPages:c}},render(){const{pagerCount:r,totalPage:e,pageIndex:t,setPageIndex:n,jumpPage:i,centerPages:a}=this;return d.createVNode("ul",{class:"s-pager"},[d.createVNode("li",{onClick:()=>n(1),class:{current:t===1}},[d.createTextVNode("1")]),e>r&&t>Math.ceil(r/2)&&d.createVNode("li",{class:"more left",onClick:()=>i(-5)},[d.createTextVNode("...")]),a.map(o=>d.createVNode("li",{onClick:()=>n(o),class:{current:t===o}},[o])),e>r&&t<e-Math.ceil(r/2)+1&&d.createVNode("li",{class:"more right",onClick:()=>i(5)},[d.createTextVNode("...")]),e>1&&d.createVNode("li",{onClick:()=>n(e),class:{current:t===e}},[e])])}}),J=d.defineComponent({name:"SPagination",props:ae,emits:["update:modelValue"],setup(r,{emit:e}){const t=d.ref(),n=d.computed(()=>t.value?t.value.pageIndex<2:!0),i=d.computed(()=>t.value?t.value.pageIndex>t.value.totalPage-1:!0);return d.onMounted(()=>{d.watch(()=>t.value.pageIndex,a=>{e("update:modelValue",a)}),d.watch(()=>r.modelValue,a=>{t.value.pageIndex=a})}),()=>d.createVNode("div",{class:"s-pagination"},[d.createVNode("button",{disabled:n.value,onClick:()=>t.value.prevPage()},[d.createTextVNode("上一页")]),d.createVNode(Y,d.mergeProps(r,{ref:t}),null),d.createVNode("button",{disabled:i.value,onClick:()=>t.value.nextPage()},[d.createTextVNode("下一页")])])}}),De={install(r){r.component(J.name,J),r.component(Y.name,Y)}},oe=Symbol("formContextToken"),Le={model:{type:Object,required:!0},layout:{type:String,default:"horizontal"},labelSize:{type:String,default:"md"},labelAlign:{type:String,default:"start"},rules:{type:Object}},Ft="",W=d.defineComponent({name:"SForm",props:Le,emits:["submit"],setup(r,{slots:e,emit:t,expose:n}){const i=d.computed(()=>({layout:r.layout,labelSize:r.labelSize,labelAlign:r.labelAlign}));d.provide("LABEL_DATA",i);const a=new Set,o=c=>a.add(c),s=c=>a.delete(c);d.provide(oe,{model:r.model,rules:r.rules,addItem:o,removeItem:s});const l=c=>{c.preventDefault(),t("submit")};return n({validate:c=>{const h=[];a.forEach(b=>h.push(b.validate())),Promise.all(h).then(()=>c(!0)).catch(()=>c(!1))}}),()=>{var c;return d.createVNode("form",{class:"s-form",onSubmit:l},[(c=e.default)==null?void 0:c.call(e)])}}}),Me={label:{type:String},prop:{type:String}},Vt="";function A(){return A=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},A.apply(this,arguments)}function Ce(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,L(r,e)}function Z(r){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(r)}function L(r,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},L(r,e)}function Re(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(r,e,t){return Re()?k=Reflect.construct.bind():k=function(i,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(i,s),p=new l;return o&&L(p,o.prototype),p},k.apply(null,arguments)}function ke(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function G(r){var e=typeof Map=="function"?new Map:void 0;return G=function(n){if(n===null||!ke(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return k(n,arguments,Z(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),L(i,n)},G(r)}var $e=/%[sdj%]/g,se=function(){};typeof process<"u"&&process.env&&process.env.NODE_ENV!=="production"&&typeof window<"u"&&typeof document<"u"&&(se=function(e,t){typeof console<"u"&&console.warn&&typeof ASYNC_VALIDATOR_NO_WARNING>"u"&&t.every(function(n){return typeof n=="string"})&&console.warn(e,t)});function X(r){if(!r||!r.length)return null;var e={};return r.forEach(function(t){var n=t.field;e[n]=e[n]||[],e[n].push(t)}),e}function O(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var i=0,a=t.length;if(typeof r=="function")return r.apply(null,t);if(typeof r=="string"){var o=r.replace($e,function(s){if(s==="%%")return"%";if(i>=a)return s;switch(s){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch{return"[Circular]"}break;default:return s}});return o}return r}function ze(r){return r==="string"||r==="url"||r==="hex"||r==="email"||r==="date"||r==="pattern"}function q(r,e){return!!(r==null||e==="array"&&Array.isArray(r)&&!r.length||ze(e)&&typeof r=="string"&&!r)}function Be(r,e,t){var n=[],i=0,a=r.length;function o(s){n.push.apply(n,s||[]),i++,i===a&&t(n)}r.forEach(function(s){e(s,o)})}function de(r,e,t){var n=0,i=r.length;function a(o){if(o&&o.length){t(o);return}var s=n;n=n+1,s<i?e(r[s],a):t([])}a([])}function He(r){var e=[];return Object.keys(r).forEach(function(t){e.push.apply(e,r[t]||[])}),e}var le=function(r){Ce(e,r);function e(t,n){var i;return i=r.call(this,"Async Validation Error")||this,i.errors=t,i.fields=n,i}return e}(G(Error));function Ue(r,e,t,n,i){if(e.first){var a=new Promise(function(b,P){var I=function(f){return n(f),f.length?P(new le(f,X(f))):b(i)},u=He(r);de(u,t,I)});return a.catch(function(b){return b}),a}var o=e.firstFields===!0?Object.keys(r):e.firstFields||[],s=Object.keys(r),l=s.length,p=0,c=[],h=new Promise(function(b,P){var I=function(g){if(c.push.apply(c,g),p++,p===l)return n(c),c.length?P(new le(c,X(c))):b(i)};s.length||(n(c),b(i)),s.forEach(function(u){var g=r[u];o.indexOf(u)!==-1?de(g,t,I):Be(g,t,I)})});return h.catch(function(b){return b}),h}function Ye(r){return!!(r&&r.message!==void 0)}function Je(r,e){for(var t=r,n=0;n<e.length;n++){if(t==null)return t;t=t[e[n]]}return t}function fe(r,e){return function(t){var n;return r.fullFields?n=Je(e,r.fullFields):n=e[t.field||r.fullField],Ye(t)?(t.field=t.field||r.fullField,t.fieldValue=n,t):{message:typeof t=="function"?t():t,fieldValue:n,field:t.field||r.fullField}}}function ce(r,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];typeof n=="object"&&typeof r[t]=="object"?r[t]=A({},r[t],n):r[t]=n}}return r}var ue=function(e,t,n,i,a,o){e.required&&(!n.hasOwnProperty(e.field)||q(t,o||e.type))&&i.push(O(a.messages.required,e.fullField))},We=function(e,t,n,i,a){(/^\s+$/.test(t)||t==="")&&i.push(O(a.messages.whitespace,e.fullField))},$,Ze=function(){if($)return $;var r="[a-fA-F\\d:]",e=function(y){return y&&y.includeBoundaries?"(?:(?<=\\s|^)(?="+r+")|(?<="+r+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+t+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+t+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+t+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+t+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+t+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+t+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+t+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp("(?:^"+t+"$)|(?:^"+i+"$)"),o=new RegExp("^"+t+"$"),s=new RegExp("^"+i+"$"),l=function(y){return y&&y.exact?a:new RegExp("(?:"+e(y)+t+e(y)+")|(?:"+e(y)+i+e(y)+")","g")};l.v4=function(m){return m&&m.exact?o:new RegExp(""+e(m)+t+e(m),"g")},l.v6=function(m){return m&&m.exact?s:new RegExp(""+e(m)+i+e(m),"g")};var p="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",h=l.v4().source,b=l.v6().source,P="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",I="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",u="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",g="(?::\\d{2,5})?",f='(?:[/?#][^\\s"]*)?',x="(?:"+p+"|www\\.)"+c+"(?:localhost|"+h+"|"+b+"|"+P+I+u+")"+g+f;return $=new RegExp("(?:^"+x+"$)","i"),$},pe={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},M={integer:function(e){return M.number(e)&&parseInt(e,10)===e},float:function(e){return M.number(e)&&!M.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!M.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(pe.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Ze())},hex:function(e){return typeof e=="string"&&!!e.match(pe.hex)}},Ge=function(e,t,n,i,a){if(e.required&&t===void 0){ue(e,t,n,i,a);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=e.type;o.indexOf(s)>-1?M[s](t)||i.push(O(a.messages.types[s],e.fullField,e.type)):s&&typeof t!==e.type&&i.push(O(a.messages.types[s],e.fullField,e.type))},Xe=function(e,t,n,i,a){var o=typeof e.len=="number",s=typeof e.min=="number",l=typeof e.max=="number",p=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=t,h=null,b=typeof t=="number",P=typeof t=="string",I=Array.isArray(t);if(b?h="number":P?h="string":I&&(h="array"),!h)return!1;I&&(c=t.length),P&&(c=t.replace(p,"_").length),o?c!==e.len&&i.push(O(a.messages[h].len,e.fullField,e.len)):s&&!l&&c<e.min?i.push(O(a.messages[h].min,e.fullField,e.min)):l&&!s&&c>e.max?i.push(O(a.messages[h].max,e.fullField,e.max)):s&&l&&(c<e.min||c>e.max)&&i.push(O(a.messages[h].range,e.fullField,e.min,e.max))},j="enum",Ke=function(e,t,n,i,a){e[j]=Array.isArray(e[j])?e[j]:[],e[j].indexOf(t)===-1&&i.push(O(a.messages[j],e.fullField,e[j].join(", ")))},Qe=function(e,t,n,i,a){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(O(a.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(t)||i.push(O(a.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},v={required:ue,whitespace:We,type:Ge,range:Xe,enum:Ke,pattern:Qe},et=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(t,"string")&&!e.required)return n();v.required(e,t,i,o,a,"string"),q(t,"string")||(v.type(e,t,i,o,a),v.range(e,t,i,o,a),v.pattern(e,t,i,o,a),e.whitespace===!0&&v.whitespace(e,t,i,o,a))}n(o)},tt=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(t)&&!e.required)return n();v.required(e,t,i,o,a),t!==void 0&&v.type(e,t,i,o,a)}n(o)},nt=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(t===""&&(t=void 0),q(t)&&!e.required)return n();v.required(e,t,i,o,a),t!==void 0&&(v.type(e,t,i,o,a),v.range(e,t,i,o,a))}n(o)},rt=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(t)&&!e.required)return n();v.required(e,t,i,o,a),t!==void 0&&v.type(e,t,i,o,a)}n(o)},it=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(t)&&!e.required)return n();v.required(e,t,i,o,a),q(t)||v.type(e,t,i,o,a)}n(o)},at=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(t)&&!e.required)return n();v.required(e,t,i,o,a),t!==void 0&&(v.type(e,t,i,o,a),v.range(e,t,i,o,a))}n(o)},ot=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(t)&&!e.required)return n();v.required(e,t,i,o,a),t!==void 0&&(v.type(e,t,i,o,a),v.range(e,t,i,o,a))}n(o)},st=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(t==null&&!e.required)return n();v.required(e,t,i,o,a,"array"),t!=null&&(v.type(e,t,i,o,a),v.range(e,t,i,o,a))}n(o)},dt=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(t)&&!e.required)return n();v.required(e,t,i,o,a),t!==void 0&&v.type(e,t,i,o,a)}n(o)},lt="enum",ft=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(t)&&!e.required)return n();v.required(e,t,i,o,a),t!==void 0&&v[lt](e,t,i,o,a)}n(o)},ct=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(t,"string")&&!e.required)return n();v.required(e,t,i,o,a),q(t,"string")||v.pattern(e,t,i,o,a)}n(o)},ut=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(t,"date")&&!e.required)return n();if(v.required(e,t,i,o,a),!q(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),v.type(e,l,i,o,a),l&&v.range(e,l.getTime(),i,o,a)}}n(o)},pt=function(e,t,n,i,a){var o=[],s=Array.isArray(t)?"array":typeof t;v.required(e,t,i,o,a,s),n(o)},K=function(e,t,n,i,a){var o=e.type,s=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(q(t,o)&&!e.required)return n();v.required(e,t,i,s,a,o),q(t,o)||v.type(e,t,i,s,a)}n(s)},gt=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(t)&&!e.required)return n();v.required(e,t,i,o,a)}n(o)},C={string:et,method:tt,number:nt,boolean:rt,regexp:it,integer:at,float:ot,array:st,object:dt,enum:ft,pattern:ct,date:ut,url:K,hex:K,email:K,required:pt,any:gt};function Q(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var ee=Q(),R=function(){function r(t){this.rules=null,this._messages=ee,this.define(t)}var e=r.prototype;return e.define=function(n){var i=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(a){var o=n[a];i.rules[a]=Array.isArray(o)?o:[o]})},e.messages=function(n){return n&&(this._messages=ce(Q(),n)),this._messages},e.validate=function(n,i,a){var o=this;i===void 0&&(i={}),a===void 0&&(a=function(){});var s=n,l=i,p=a;if(typeof l=="function"&&(p=l,l={}),!this.rules||Object.keys(this.rules).length===0)return p&&p(null,s),Promise.resolve(s);function c(u){var g=[],f={};function x(y){if(Array.isArray(y)){var N;g=(N=g).concat.apply(N,y)}else g.push(y)}for(var m=0;m<u.length;m++)x(u[m]);g.length?(f=X(g),p(g,f)):p(null,s)}if(l.messages){var h=this.messages();h===ee&&(h=Q()),ce(h,l.messages),l.messages=h}else l.messages=this.messages();var b={},P=l.keys||Object.keys(this.rules);P.forEach(function(u){var g=o.rules[u],f=s[u];g.forEach(function(x){var m=x;typeof m.transform=="function"&&(s===n&&(s=A({},s)),f=s[u]=m.transform(f)),typeof m=="function"?m={validator:m}:m=A({},m),m.validator=o.getValidationMethod(m),m.validator&&(m.field=u,m.fullField=m.fullField||u,m.type=o.getType(m),b[u]=b[u]||[],b[u].push({rule:m,value:f,source:s,field:u}))})});var I={};return Ue(b,l,function(u,g){var f=u.rule,x=(f.type==="object"||f.type==="array")&&(typeof f.fields=="object"||typeof f.defaultField=="object");x=x&&(f.required||!f.required&&u.value),f.field=u.field;function m(w,V){return A({},V,{fullField:f.fullField+"."+w,fullFields:f.fullFields?[].concat(f.fullFields,[w]):[w]})}function y(w){w===void 0&&(w=[]);var V=Array.isArray(w)?w:[w];!l.suppressWarning&&V.length&&r.warning("async-validator:",V),V.length&&f.message!==void 0&&(V=[].concat(f.message));var F=V.map(fe(f,s));if(l.first&&F.length)return I[f.field]=1,g(F);if(!x)g(F);else{if(f.required&&!u.value)return f.message!==void 0?F=[].concat(f.message).map(fe(f,s)):l.error&&(F=[l.error(f,O(l.messages.required,f.field))]),g(F);var S={};f.defaultField&&Object.keys(u.value).map(function(T){S[T]=f.defaultField}),S=A({},S,u.rule.fields);var D={};Object.keys(S).forEach(function(T){var E=S[T],bt=Array.isArray(E)?E:[E];D[T]=bt.map(m.bind(null,T))});var me=new r(D);me.messages(l.messages),u.rule.options&&(u.rule.options.messages=l.messages,u.rule.options.error=l.error),me.validate(u.value,u.rule.options||l,function(T){var E=[];F&&F.length&&E.push.apply(E,F),T&&T.length&&E.push.apply(E,T),g(E.length?E:null)})}}var N;if(f.asyncValidator)N=f.asyncValidator(f,u.value,y,u.source,l);else if(f.validator){try{N=f.validator(f,u.value,y,u.source,l)}catch(w){console.error==null||console.error(w),l.suppressValidatorError||setTimeout(function(){throw w},0),y(w.message)}N===!0?y():N===!1?y(typeof f.message=="function"?f.message(f.fullField||f.field):f.message||(f.fullField||f.field)+" fails"):N instanceof Array?y(N):N instanceof Error&&y(N.message)}N&&N.then&&N.then(function(){return y()},function(w){return y(w)})},function(u){c(u)},s)},e.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!C.hasOwnProperty(n.type))throw new Error(O("Unknown rule type %s",n.type));return n.type||"string"},e.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var i=Object.keys(n),a=i.indexOf("message");return a!==-1&&i.splice(a,1),i.length===1&&i[0]==="required"?C.required:C[this.getType(n)]||void 0},r}();R.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");C[e]=t},R.warning=se,R.messages=ee,R.validators=C;const ge=d.defineComponent({name:"SFormItem",props:Me,setup(r,{slots:e}){const t=d.inject("LABEL_DATA"),n=d.computed(()=>({"s-form__item":!0,"s-form__item--horizontal":t.value.layout==="horizontal","s-form__item--vertical":t.value.layout==="vertical"})),i=d.computed(()=>({"s-form__label":!0,"s-form__label--vertical":t.value.layout==="vertical",[`s-form__label--${t.value.labelAlign}`]:t.value.layout==="horizontal",[`s-form__label--${t.value.labelSize}`]:t.value.layout==="horizontal"})),a=d.inject(oe),o=d.ref(!1),s=d.ref(""),p={validate:()=>{if(!a)return console.warn("请在Form中使用FormItem"),Promise.reject("请在Form中使用FormItem");if(!r.prop)return console.warn("如果要校验当前项，请设置prop字段"),Promise.reject("如果要校验当前项，请设置prop字段");if(!a.rules)return Promise.resolve({result:!0});const c=a.rules[r.prop]||void 0;if(!c)return Promise.resolve({result:!0});const h=a.model[r.prop];return new R({[r.prop]:c}).validate({[r.prop]:h},P=>{P?(o.value=!0,s.value=P[0].message||"校验错误"):(o.value=!1,s.value="")})}};return d.provide("FORM_ITEM_CTX",p),d.onMounted(()=>{r.prop&&(a==null||a.addItem(p))}),d.onUnmounted(()=>{r.prop&&(a==null||a.removeItem(p))}),()=>{var c;return d.createVNode("div",{class:n.value},[d.createVNode("span",{class:i.value},[r.label]),d.createVNode("div",null,[(c=e.default)==null?void 0:c.call(e)]),o.value&&d.createVNode("div",{class:"error-message"},[s.value])])}}}),mt={install(r){r.component(W.name,W),r.component(ge.name,ge)}},ht={modelValue:{type:String,default:""},type:{type:String,default:"text"}},It="",te=d.defineComponent({name:"SInput",props:ht,emits:["update:modelValue"],setup(r,{emit:e}){const t=d.inject("FORM_ITEM_CTX"),n=i=>{const a=i.target.value;e("update:modelValue",a),t.validate()};return()=>d.createVNode("div",{class:"s-input"},[d.createVNode("input",{class:"s-input__input",value:r.modelValue,onInput:n,type:r.type},null)])}}),yt=[ye,Te,De,mt,{install(r){r.component(te.name,te)}}],vt={version:"0.0.1",install(r){yt.forEach(e=>r.use(e))}};_.Button=z,_.Form=W,_.Input=te,_.Pagination=J,_.Tree=U,_.default=vt,Object.defineProperties(_,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
