(function(O,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],l):(O=typeof globalThis<"u"?globalThis:O||self,l(O.MinSheepUI={},O.Vue))})(this,function(O,l){"use strict";const ye={type:{type:String,default:"secondary"},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1},block:{type:Boolean,default:!1}},_t="",qt="",z=l.defineComponent({name:"SButton",props:ye,setup(n,{slots:e}){const{type:t,size:r,disabled:a,block:i}=l.toRefs(n),o=i.value?"s-btn--block":"";return()=>l.createVNode("button",{disabled:a.value,class:`s-btn s-btn--${t.value} s-btn--${r.value} ${o}`},[e.default?e.default():"按钮"])}}),ve={install(n){n.component(z.name,z)}};function $(n,e=0,t=[]){return e++,n.reduce((r,a)=>{const i={...a};i.level=e,t.length>0&&t[t.length-1].level>=e&&t.pop(),t.push(i);const o=t[t.length-2];if(o&&(i.parentId=o.id),i.children){const s=$(i.children,e,t);return delete i.children,r.concat(i,s)}else return i.isLeaf===void 0&&(i.isLeaf=!0),r.concat(i)},[])}function be(n,{getChildren:e}){return{toggleCheckNode:r=>{r.checked=!r.checked,e(r).forEach(s=>{s.checked=r.checked});const a=n.value.find(s=>s.id===r.parentId);if(!a)return;const i=e(a,!1),o=i.filter(s=>s.checked);o.length===i.length?a.checked=!0:o.length===0&&(a.checked=!1)}}}function xe(n){const e=l.computed(()=>{let s=[];const d=[];for(const p of n.value)s.map(f=>f.id).includes(p.id)||(p.expanded!==!0&&(s=t(p)),d.push(p));return d}),t=(s,d=!0)=>{const p=[],f=n.value.findIndex(h=>h.id===s.id);for(let h=f+1;h<n.value.length&&s.level<n.value[h].level;h++)(d||s.level===n.value[h].level-1)&&p.push(n.value[h]);return p},r=(s,d=[])=>{const p=t(s,!1);return d.push(...p),p.forEach(f=>{f.expanded&&r(f,d)}),d};return{expandedTree:e,getChildren:t,getChildrenExpanded:r,getIndex:s=>s?n.value.findIndex(d=>d.id===s.id):-1,getNode:s=>n.value.find(d=>d.id===s.id),getParent:s=>n.value.find(d=>d.id===s.parentId)}}const H={dropPrev:"s-tree__node--drop-prev",dropNext:"s-tree__node--drop-next",dropInner:"s-tree__node--drop-inner"};function Ne(n,e,{getChildren:t,getParent:r}){const a=l.reactive({dropType:void 0,draggingNode:null,draggingTreeNode:null}),i=l.computed(()=>e.value.reduce((u,g)=>({...u,[g.id]:g}),{})),o=u=>{u==null||u.classList.remove(...Object.values(H))},s=(u,g)=>{var x;const c=(x=i.value[u])==null?void 0:x.parentId;return c===g?!0:c!==void 0?s(c,g):!1},d=()=>{a.dropType=void 0,a.draggingNode=null,a.draggingTreeNode=null},p=(u,g)=>{var c;u.stopPropagation(),a.draggingNode=u.target,a.draggingTreeNode=g,(c=u.dataTransfer)==null||c.setData("dragNodeId",g.id)},f=u=>{if(u.preventDefault(),u.stopPropagation(),!!a.draggingNode&&n){if(u.dataTransfer&&(u.dataTransfer.dropEffect="move"),!e)return;let g={};typeof n=="object"?g=n:n===!0&&(g={dropInner:!0});const{dropPrev:c,dropNext:x,dropInner:m}=g;let y;const N=c?m?.25:x?.45:1:-1,w=x?m?.75:c?.55:0:1,q=u.currentTarget,_=q==null?void 0:q.getBoundingClientRect(),S=u.clientY-((_==null?void 0:_.top)||0);if(S<((_==null?void 0:_.height)||0)*N?y="dropPrev":S>((_==null?void 0:_.height)||0)*w?y="dropNext":m?y="dropInner":y=void 0,y){const M=q==null?void 0:q.classList;M&&(M.contains(H[y])||(o(q),M.add(H[y])))}else o(q);a.dropType=y}},h=u=>{u.stopPropagation(),a.draggingNode&&o(u.currentTarget)},b=(u,g)=>{var x;if(u.preventDefault(),u.stopPropagation(),o(u.currentTarget),!a.draggingNode||!n)return;const c=(x=u.dataTransfer)==null?void 0:x.getData("dragNodeId");if(c){const m=s(g.id,c);if(c===g.id||m)return;a.dropType&&V(c,g),d()}};function V(u,g){const c=e.value.find(x=>x.id===u);if(c){let x;const m=t(c),y=r(c);if(a.dropType==="dropInner"){x={...c,parentId:g.id,level:g.level+1};const N=e.value.indexOf(g);e.value.splice(N+1,0,x),g.isLeaf=void 0;const w=e.value.indexOf(c);e.value.splice(w,1)}else if(a.dropType==="dropNext"){x={...c,parentId:g.parentId,level:g.level};const N=e.value.indexOf(g),w=t(g,!0).length;e.value.splice(N+w+1,0,x);const q=e.value.indexOf(c);e.value.splice(q,1)}else if(a.dropType==="dropPrev"){x={...c,parentId:g.parentId,level:g.level};const N=e.value.indexOf(g);e.value.splice(N,0,x);const w=e.value.indexOf(c);e.value.splice(w,1)}a.dropType="dropInner",m.forEach(N=>V(N.id,x)),y&&t(y).length===0&&(y.isLeaf=!0)}}return{onDragstart:p,onDragover:f,onDragleave:h,onDrop:b,onDragend:u=>{u.preventDefault(),u.stopPropagation(),d()}}}function we(n,{getNode:e,getIndex:t,getChildren:r},{emit:a}){const i=p=>{const f=e(p);f&&f.isLeaf===!1&&!f.childNodeCount&&(f.loading=!0,a("lazy-load",p,o))},o=p=>{const f=e(p.node);if(f){f.loading=!1;const h=l.ref($(p.treeItems,f.level));s(f,h),d(f,h);const b=r(f);f.childNodeCount=b.length}},s=(p,f)=>{f.value.forEach(h=>{h.level-1===p.level&&!h.parentId&&(h.parentId=p.id)})},d=(p,f)=>{const h=t(p);h&&n.value.splice(h+1,0,...f.value)};return{lazyLoadNodes:i}}function Ve(n=8){const e="abcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let r=0;r<n;r++)t+=e[parseInt((Math.random()*e.length).toString())];return t}function Pe(n,{getChildren:e,getIndex:t}){return{append:(i,o)=>{const s=e(i,!1),d=s[s.length-1];let p=t(i)+1;d&&(p=t(d)+1),i.expanded=!0,i.isLeaf=!1;const f=l.ref({...o,level:i.level+1,parentId:i.id,isLeaf:!0});f.value.id===void 0&&(f.value.id=Ve()),n.value.splice(p,0,f.value)},remove:i=>{const o=e(i).map(s=>s.id);n.value=n.value.filter(s=>s.id!==i.id&&!o.includes(s.id))}}}function _e(n,e,t,r){const{lazyLoadNodes:a}=r;return{toggleNode:o=>{const s=n.value.find(d=>d.id===o.id);s&&(s.expanded=!s.expanded,s.expanded&&a(s))}}}function qe(n,e,t){const r=l.unref(n),a=l.ref($(r)),i=xe(a),o=[_e,be,Pe],s=we(a,i,t),d=Ne(e.draggable,a,i);return{...o.reduce((f,h)=>({...f,...h(a,i,t,s)}),{}),...i,...d,treeData:a}}const re={data:{type:Object,required:!0},lineable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},operable:{type:Boolean,default:!1},draggable:{type:[Boolean,Object],default:!1},height:{type:Number},itemHeight:{type:Number,default:30}},Fe={...re,treeNode:{type:Object,required:!0}},ae=32,ie=24,Oe=l.defineComponent({name:"STreeNode",props:Fe,setup(n,{slots:e}){const{lineable:t,checkable:r,treeNode:a,operable:i,draggable:o}=l.toRefs(n),{toggleCheckNode:s,getChildrenExpanded:d,append:p,remove:f,onDragend:h,onDragleave:b,onDragover:V,onDragstart:F,onDrop:u}=l.inject("TREE_UTILS"),g=l.ref(!1),c=()=>{g.value?g.value=!1:g.value=!0};let x={};return o.value&&(x={draggable:!0,onDragend:m=>h(m),onDragleave:m=>b(m),onDragover:m=>V(m),onDragstart:m=>F(m,a.value),onDrop:m=>u(m,a.value)}),()=>{var m,y,N;return l.createVNode("div",{class:"s-tree__node hover:bg-slate-300 relative leading-8",style:{paddingLeft:`${ie*(a.value.level-1)}px`},onMouseenter:c,onMouseleave:c},[!a.value.isLeaf&&a.value.expanded&&t.value&&l.createVNode("span",{class:"s-tree-node__vline absolute w-px bg-slate-300",style:{height:`${ae*d(a.value).length}px`,left:`${ie*(a.value.level-1)+9}px`,top:`${ae}px`}},null),l.createVNode("div",l.mergeProps({class:"s-tree__node--content"},x),[a.value.isLeaf?l.createVNode("span",{style:{display:"inline-block",width:"18px"}},null):(m=e.icon)==null?void 0:m.call(e),r.value&&l.withDirectives(l.createVNode("input",{type:"checkbox","onUpdate:modelValue":w=>a.value.checked=w,onClick:()=>{s(a.value)}},null),[[l.vModelCheckbox,a.value.checked]]),(y=e.content)==null?void 0:y.call(e),i.value&&g.value&&l.createVNode("span",{class:"inline-flex ml-1"},[l.createVNode("svg",{onClick:()=>{p(a.value,{label:"新节点"})},viewBox:"0 0 1024 1024",width:"14",height:"14",class:"cursor-pointer"},[l.createVNode("path",{d:"M590.769231 571.076923h324.923077c15.753846 0 29.538462-13.784615 29.538461-29.538461v-59.076924c0-15.753846-13.784615-29.538462-29.538461-29.538461H590.769231c-11.815385 0-19.692308-7.876923-19.692308-19.692308V108.307692c0-15.753846-13.784615-29.538462-29.538461-29.538461h-59.076924c-15.753846 0-29.538462 13.784615-29.538461 29.538461V433.230769c0 11.815385-7.876923 19.692308-19.692308 19.692308H108.307692c-15.753846 0-29.538462 13.784615-29.538461 29.538461v59.076924c0 15.753846 13.784615 29.538462 29.538461 29.538461H433.230769c11.815385 0 19.692308 7.876923 19.692308 19.692308v324.923077c0 15.753846 13.784615 29.538462 29.538461 29.538461h59.076924c15.753846 0 29.538462-13.784615 29.538461-29.538461V590.769231c0-11.815385 7.876923-19.692308 19.692308-19.692308z"},null)]),l.createVNode("svg",{onClick:()=>{f(a.value)},viewBox:"0 0 1024 1024",width:"14",height:"14",class:"cursor-pointer ml-1"},[l.createVNode("path",{d:"M610.461538 500.184615l256-257.96923c11.815385-11.815385 11.815385-29.538462 0-41.353847l-39.384615-41.353846c-11.815385-11.815385-29.538462-11.815385-41.353846 0L527.753846 417.476923c-7.876923 7.876923-19.692308 7.876923-27.569231 0L242.215385 157.538462c-11.815385-11.815385-29.538462-11.815385-41.353847 0l-41.353846 41.353846c-11.815385 11.815385-11.815385 29.538462 0 41.353846l257.969231 257.969231c7.876923 7.876923 7.876923 19.692308 0 27.56923L157.538462 785.723077c-11.815385 11.815385-11.815385 29.538462 0 41.353846l41.353846 41.353846c11.815385 11.815385 29.538462 11.815385 41.353846 0L498.215385 610.461538c7.876923-7.876923 19.692308-7.876923 27.56923 0l257.969231 257.969231c11.815385 11.815385 29.538462 11.815385 41.353846 0L866.461538 827.076923c11.815385-11.815385 11.815385-29.538462 0-41.353846L610.461538 527.753846c-7.876923-7.876923-7.876923-19.692308 0-27.569231z"},null)])]),a.value.loading&&((N=e.loading)==null?void 0:N.call(e))])])}}}),Ie=(n,{emit:e})=>l.createVNode("svg",{style:{width:"18px",height:"18px",display:"inline-block",transform:n.expanded?"rotate(90deg)":""},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",onClick:()=>e("onClick")},[l.createVNode("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null)]),Ft="",Te={data:{type:Array,default:[]},itemHeight:{type:Number,default:22},component:{type:String,default:"div"}},Ot="",Ee=l.defineComponent({name:"SVirtualList",props:Te,setup(n,{slots:e}){const{data:t,itemHeight:r,component:a}=l.toRefs(n),i=l.ref(),o=l.ref(0),s=l.ref(0),d=l.ref(0),p=l.computed(()=>Math.ceil(o.value/r.value)),f=l.computed(()=>t.value.slice(d.value,Math.min(d.value+p.value,t.value.length)));l.onMounted(()=>{var b;o.value=(b=i.value)==null?void 0:b.clientHeight});const h=b=>{const{scrollTop:V}=b.target;d.value=Math.floor(V/r.value),s.value=V-V%r.value};return()=>l.createVNode(a.value,{class:"s-virtual-list__container",ref:i,onScroll:h},{default:()=>[l.createVNode("div",{class:"s-virtual-list__blank",style:{height:`${t.value.length*r.value}px`}},null),l.createVNode("div",{class:"s-virtual-list",style:{transform:`translate3d(0, ${s.value}px, 0)`}},[f.value.map((b,V)=>{var F;return(F=e.default)==null?void 0:F.call(e,{item:b,index:V})})])]})}}),U=l.defineComponent({name:"STree",props:re,emits:["lazy-load"],setup(n,e){const{data:t,height:r,itemHeight:a}=l.toRefs(n),{slots:i}=e,o=qe(t,n,e);return l.provide("TREE_UTILS",o),()=>{const s=d=>l.createVNode(Oe,l.mergeProps(n,{treeNode:d}),{content:()=>i.content?i.content(d):d.label,icon:()=>i.icon?i.icon({nodeData:d,toggleNode:o.toggleNode}):l.createVNode(Ie,{expanded:!!d.expanded,onClick:()=>o.toggleNode(d)},null),loading:()=>i.loading?i.loading({nodeData:o}):l.createVNode("span",{class:"ml-1"},[l.createTextVNode("loading...")])});return l.createVNode("div",{class:"s-tree"},[r!=null&&r.value?l.createVNode("div",{style:{height:`${r.value}px`}},[l.createVNode(Ee,{data:o.expandedTree.value,itemHeight:a.value},{default:({item:d})=>s(d)})]):o.expandedTree.value.map(d=>s(d))])}}}),Se={install(n){n.component(U.name,U)}},oe={total:{type:Number,default:0},pageSize:{type:Number,default:10},pagerCount:{type:Number,default:7},modelValue:{type:Number,default:1}},It="";function Ae(n=1){const e=l.ref(n),t=o=>{e.value=o},r=o=>{e.value+=o};return{pageIndex:e,setPageIndex:t,jumpPage:r,prevPage:()=>r(-1),nextPage:()=>r(1)}}const je=(n,e,t)=>{const r=Array.from(Array(n).keys());if(n<=t)return r.slice(2,n);{const a=Math.ceil(t/2);return e<=a?r.slice(2,t):e>=n-a+1?r.slice(n-t+2,n):r.slice(e-a+2,e+a-1)}},Me=oe,Y=l.defineComponent({name:"SPager",props:Me,setup(n){const{total:e,pageSize:t,pagerCount:r}=l.toRefs(n),a=l.computed(()=>Math.ceil(e.value/t.value)),{pageIndex:i,setPageIndex:o,jumpPage:s,prevPage:d,nextPage:p}=Ae(),f=l.computed(()=>je(a.value,i.value,r.value));return{totalPage:a,pageIndex:i,setPageIndex:o,jumpPage:s,prevPage:d,nextPage:p,centerPages:f}},render(){const{pagerCount:n,totalPage:e,pageIndex:t,setPageIndex:r,jumpPage:a,centerPages:i}=this;return l.createVNode("ul",{class:"s-pager"},[l.createVNode("li",{onClick:()=>r(1),class:{current:t===1}},[l.createTextVNode("1")]),e>n&&t>Math.ceil(n/2)&&l.createVNode("li",{class:"more left",onClick:()=>a(-5)},[l.createTextVNode("...")]),i.map(o=>l.createVNode("li",{onClick:()=>r(o),class:{current:t===o}},[o])),e>n&&t<e-Math.ceil(n/2)+1&&l.createVNode("li",{class:"more right",onClick:()=>a(5)},[l.createTextVNode("...")]),e>1&&l.createVNode("li",{onClick:()=>r(e),class:{current:t===e}},[e])])}}),J=l.defineComponent({name:"SPagination",props:oe,emits:["update:modelValue"],setup(n,{emit:e}){const t=l.ref(),r=l.computed(()=>t.value?t.value.pageIndex<2:!0),a=l.computed(()=>t.value?t.value.pageIndex>t.value.totalPage-1:!0);return l.onMounted(()=>{l.watch(()=>t.value.pageIndex,i=>{e("update:modelValue",i)}),l.watch(()=>n.modelValue,i=>{t.value.pageIndex=i})}),()=>l.createVNode("div",{class:"s-pagination"},[l.createVNode("button",{disabled:r.value,onClick:()=>t.value.prevPage()},[l.createTextVNode("上一页")]),l.createVNode(Y,l.mergeProps(n,{ref:t}),null),l.createVNode("button",{disabled:a.value,onClick:()=>t.value.nextPage()},[l.createTextVNode("下一页")])])}}),Ce={install(n){n.component(J.name,J),n.component(Y.name,Y)}},se=Symbol("formContextToken"),De={model:{type:Object,required:!0},layout:{type:String,default:"horizontal"},labelSize:{type:String,default:"md"},labelAlign:{type:String,default:"start"},rules:{type:Object}},Tt="",W=l.defineComponent({name:"SForm",props:De,emits:["submit"],setup(n,{slots:e,emit:t,expose:r}){const a=l.computed(()=>({layout:n.layout,labelSize:n.labelSize,labelAlign:n.labelAlign}));l.provide("LABEL_DATA",a);const i=new Set,o=f=>i.add(f),s=f=>i.delete(f);l.provide(se,{model:n.model,rules:n.rules,addItem:o,removeItem:s});const d=f=>{f.preventDefault(),t("submit")};return r({validate:f=>{const h=[];i.forEach(b=>h.push(b.validate())),Promise.all(h).then(()=>f(!0)).catch(()=>f(!1))}}),()=>{var f;return l.createVNode("form",{class:"s-form",onSubmit:d},[(f=e.default)==null?void 0:f.call(e)])}}}),Le={label:{type:String},prop:{type:String}},Et="";function A(){return A=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},A.apply(this,arguments)}function Re(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,C(n,e)}function Z(n){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(n)}function C(n,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},C(n,e)}function ke(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(n,e,t){return ke()?k=Reflect.construct.bind():k=function(a,i,o){var s=[null];s.push.apply(s,i);var d=Function.bind.apply(a,s),p=new d;return o&&C(p,o.prototype),p},k.apply(null,arguments)}function Be(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function G(n){var e=typeof Map=="function"?new Map:void 0;return G=function(r){if(r===null||!Be(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,a)}function a(){return k(r,arguments,Z(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),C(a,r)},G(n)}var ze=/%[sdj%]/g,le=function(){};typeof process<"u"&&process.env&&process.env.NODE_ENV!=="production"&&typeof window<"u"&&typeof document<"u"&&(le=function(e,t){typeof console<"u"&&console.warn&&typeof ASYNC_VALIDATOR_NO_WARNING>"u"&&t.every(function(r){return typeof r=="string"})&&console.warn(e,t)});function X(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var r=t.field;e[r]=e[r]||[],e[r].push(t)}),e}function I(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var a=0,i=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var o=n.replace(ze,function(s){if(s==="%%")return"%";if(a>=i)return s;switch(s){case"%s":return String(t[a++]);case"%d":return Number(t[a++]);case"%j":try{return JSON.stringify(t[a++])}catch{return"[Circular]"}break;default:return s}});return o}return n}function $e(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function P(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||$e(e)&&typeof n=="string"&&!n)}function He(n,e,t){var r=[],a=0,i=n.length;function o(s){r.push.apply(r,s||[]),a++,a===i&&t(r)}n.forEach(function(s){e(s,o)})}function de(n,e,t){var r=0,a=n.length;function i(o){if(o&&o.length){t(o);return}var s=r;r=r+1,s<a?e(n[s],i):t([])}i([])}function Ue(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var fe=function(n){Re(e,n);function e(t,r){var a;return a=n.call(this,"Async Validation Error")||this,a.errors=t,a.fields=r,a}return e}(G(Error));function Ye(n,e,t,r,a){if(e.first){var i=new Promise(function(b,V){var F=function(c){return r(c),c.length?V(new fe(c,X(c))):b(a)},u=Ue(n);de(u,t,F)});return i.catch(function(b){return b}),i}var o=e.firstFields===!0?Object.keys(n):e.firstFields||[],s=Object.keys(n),d=s.length,p=0,f=[],h=new Promise(function(b,V){var F=function(g){if(f.push.apply(f,g),p++,p===d)return r(f),f.length?V(new fe(f,X(f))):b(a)};s.length||(r(f),b(a)),s.forEach(function(u){var g=n[u];o.indexOf(u)!==-1?de(g,t,F):He(g,t,F)})});return h.catch(function(b){return b}),h}function Je(n){return!!(n&&n.message!==void 0)}function We(n,e){for(var t=n,r=0;r<e.length;r++){if(t==null)return t;t=t[e[r]]}return t}function ce(n,e){return function(t){var r;return n.fullFields?r=We(e,n.fullFields):r=e[t.field||n.fullField],Je(t)?(t.field=t.field||n.fullField,t.fieldValue=r,t):{message:typeof t=="function"?t():t,fieldValue:r,field:t.field||n.fullField}}}function ue(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];typeof r=="object"&&typeof n[t]=="object"?n[t]=A({},n[t],r):n[t]=r}}return n}var pe=function(e,t,r,a,i,o){e.required&&(!r.hasOwnProperty(e.field)||P(t,o||e.type))&&a.push(I(i.messages.required,e.fullField))},Ze=function(e,t,r,a,i){(/^\s+$/.test(t)||t==="")&&a.push(I(i.messages.whitespace,e.fullField))},B,Ge=function(){if(B)return B;var n="[a-fA-F\\d:]",e=function(y){return y&&y.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",a=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+t+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+t+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+t+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+t+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+t+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+t+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+t+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=new RegExp("(?:^"+t+"$)|(?:^"+a+"$)"),o=new RegExp("^"+t+"$"),s=new RegExp("^"+a+"$"),d=function(y){return y&&y.exact?i:new RegExp("(?:"+e(y)+t+e(y)+")|(?:"+e(y)+a+e(y)+")","g")};d.v4=function(m){return m&&m.exact?o:new RegExp(""+e(m)+t+e(m),"g")},d.v6=function(m){return m&&m.exact?s:new RegExp(""+e(m)+a+e(m),"g")};var p="(?:(?:[a-z]+:)?//)",f="(?:\\S+(?::\\S*)?@)?",h=d.v4().source,b=d.v6().source,V="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",F="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",u="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",g="(?::\\d{2,5})?",c='(?:[/?#][^\\s"]*)?',x="(?:"+p+"|www\\.)"+f+"(?:localhost|"+h+"|"+b+"|"+V+F+u+")"+g+c;return B=new RegExp("(?:^"+x+"$)","i"),B},ge={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},D={integer:function(e){return D.number(e)&&parseInt(e,10)===e},float:function(e){return D.number(e)&&!D.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!D.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(ge.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Ge())},hex:function(e){return typeof e=="string"&&!!e.match(ge.hex)}},Xe=function(e,t,r,a,i){if(e.required&&t===void 0){pe(e,t,r,a,i);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=e.type;o.indexOf(s)>-1?D[s](t)||a.push(I(i.messages.types[s],e.fullField,e.type)):s&&typeof t!==e.type&&a.push(I(i.messages.types[s],e.fullField,e.type))},Ke=function(e,t,r,a,i){var o=typeof e.len=="number",s=typeof e.min=="number",d=typeof e.max=="number",p=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=t,h=null,b=typeof t=="number",V=typeof t=="string",F=Array.isArray(t);if(b?h="number":V?h="string":F&&(h="array"),!h)return!1;F&&(f=t.length),V&&(f=t.replace(p,"_").length),o?f!==e.len&&a.push(I(i.messages[h].len,e.fullField,e.len)):s&&!d&&f<e.min?a.push(I(i.messages[h].min,e.fullField,e.min)):d&&!s&&f>e.max?a.push(I(i.messages[h].max,e.fullField,e.max)):s&&d&&(f<e.min||f>e.max)&&a.push(I(i.messages[h].range,e.fullField,e.min,e.max))},j="enum",Qe=function(e,t,r,a,i){e[j]=Array.isArray(e[j])?e[j]:[],e[j].indexOf(t)===-1&&a.push(I(i.messages[j],e.fullField,e[j].join(", ")))},et=function(e,t,r,a,i){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||a.push(I(i.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(t)||a.push(I(i.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},v={required:pe,whitespace:Ze,type:Xe,range:Ke,enum:Qe,pattern:et},tt=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(P(t,"string")&&!e.required)return r();v.required(e,t,a,o,i,"string"),P(t,"string")||(v.type(e,t,a,o,i),v.range(e,t,a,o,i),v.pattern(e,t,a,o,i),e.whitespace===!0&&v.whitespace(e,t,a,o,i))}r(o)},nt=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(P(t)&&!e.required)return r();v.required(e,t,a,o,i),t!==void 0&&v.type(e,t,a,o,i)}r(o)},rt=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(t===""&&(t=void 0),P(t)&&!e.required)return r();v.required(e,t,a,o,i),t!==void 0&&(v.type(e,t,a,o,i),v.range(e,t,a,o,i))}r(o)},at=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(P(t)&&!e.required)return r();v.required(e,t,a,o,i),t!==void 0&&v.type(e,t,a,o,i)}r(o)},it=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(P(t)&&!e.required)return r();v.required(e,t,a,o,i),P(t)||v.type(e,t,a,o,i)}r(o)},ot=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(P(t)&&!e.required)return r();v.required(e,t,a,o,i),t!==void 0&&(v.type(e,t,a,o,i),v.range(e,t,a,o,i))}r(o)},st=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(P(t)&&!e.required)return r();v.required(e,t,a,o,i),t!==void 0&&(v.type(e,t,a,o,i),v.range(e,t,a,o,i))}r(o)},lt=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(t==null&&!e.required)return r();v.required(e,t,a,o,i,"array"),t!=null&&(v.type(e,t,a,o,i),v.range(e,t,a,o,i))}r(o)},dt=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(P(t)&&!e.required)return r();v.required(e,t,a,o,i),t!==void 0&&v.type(e,t,a,o,i)}r(o)},ft="enum",ct=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(P(t)&&!e.required)return r();v.required(e,t,a,o,i),t!==void 0&&v[ft](e,t,a,o,i)}r(o)},ut=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(P(t,"string")&&!e.required)return r();v.required(e,t,a,o,i),P(t,"string")||v.pattern(e,t,a,o,i)}r(o)},pt=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(P(t,"date")&&!e.required)return r();if(v.required(e,t,a,o,i),!P(t,"date")){var d;t instanceof Date?d=t:d=new Date(t),v.type(e,d,a,o,i),d&&v.range(e,d.getTime(),a,o,i)}}r(o)},gt=function(e,t,r,a,i){var o=[],s=Array.isArray(t)?"array":typeof t;v.required(e,t,a,o,i,s),r(o)},K=function(e,t,r,a,i){var o=e.type,s=[],d=e.required||!e.required&&a.hasOwnProperty(e.field);if(d){if(P(t,o)&&!e.required)return r();v.required(e,t,a,s,i,o),P(t,o)||v.type(e,t,a,s,i)}r(s)},mt=function(e,t,r,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(P(t)&&!e.required)return r();v.required(e,t,a,o,i)}r(o)},L={string:tt,method:nt,number:rt,boolean:at,regexp:it,integer:ot,float:st,array:lt,object:dt,enum:ct,pattern:ut,date:pt,url:K,hex:K,email:K,required:gt,any:mt};function Q(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var ee=Q(),R=function(){function n(t){this.rules=null,this._messages=ee,this.define(t)}var e=n.prototype;return e.define=function(r){var a=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(i){var o=r[i];a.rules[i]=Array.isArray(o)?o:[o]})},e.messages=function(r){return r&&(this._messages=ue(Q(),r)),this._messages},e.validate=function(r,a,i){var o=this;a===void 0&&(a={}),i===void 0&&(i=function(){});var s=r,d=a,p=i;if(typeof d=="function"&&(p=d,d={}),!this.rules||Object.keys(this.rules).length===0)return p&&p(null,s),Promise.resolve(s);function f(u){var g=[],c={};function x(y){if(Array.isArray(y)){var N;g=(N=g).concat.apply(N,y)}else g.push(y)}for(var m=0;m<u.length;m++)x(u[m]);g.length?(c=X(g),p(g,c)):p(null,s)}if(d.messages){var h=this.messages();h===ee&&(h=Q()),ue(h,d.messages),d.messages=h}else d.messages=this.messages();var b={},V=d.keys||Object.keys(this.rules);V.forEach(function(u){var g=o.rules[u],c=s[u];g.forEach(function(x){var m=x;typeof m.transform=="function"&&(s===r&&(s=A({},s)),c=s[u]=m.transform(c)),typeof m=="function"?m={validator:m}:m=A({},m),m.validator=o.getValidationMethod(m),m.validator&&(m.field=u,m.fullField=m.fullField||u,m.type=o.getType(m),b[u]=b[u]||[],b[u].push({rule:m,value:c,source:s,field:u}))})});var F={};return Ye(b,d,function(u,g){var c=u.rule,x=(c.type==="object"||c.type==="array")&&(typeof c.fields=="object"||typeof c.defaultField=="object");x=x&&(c.required||!c.required&&u.value),c.field=u.field;function m(w,q){return A({},q,{fullField:c.fullField+"."+w,fullFields:c.fullFields?[].concat(c.fullFields,[w]):[w]})}function y(w){w===void 0&&(w=[]);var q=Array.isArray(w)?w:[w];!d.suppressWarning&&q.length&&n.warning("async-validator:",q),q.length&&c.message!==void 0&&(q=[].concat(c.message));var _=q.map(ce(c,s));if(d.first&&_.length)return F[c.field]=1,g(_);if(!x)g(_);else{if(c.required&&!u.value)return c.message!==void 0?_=[].concat(c.message).map(ce(c,s)):d.error&&(_=[d.error(c,I(d.messages.required,c.field))]),g(_);var S={};c.defaultField&&Object.keys(u.value).map(function(E){S[E]=c.defaultField}),S=A({},S,u.rule.fields);var M={};Object.keys(S).forEach(function(E){var T=S[E],Pt=Array.isArray(T)?T:[T];M[E]=Pt.map(m.bind(null,E))});var he=new n(M);he.messages(d.messages),u.rule.options&&(u.rule.options.messages=d.messages,u.rule.options.error=d.error),he.validate(u.value,u.rule.options||d,function(E){var T=[];_&&_.length&&T.push.apply(T,_),E&&E.length&&T.push.apply(T,E),g(T.length?T:null)})}}var N;if(c.asyncValidator)N=c.asyncValidator(c,u.value,y,u.source,d);else if(c.validator){try{N=c.validator(c,u.value,y,u.source,d)}catch(w){console.error==null||console.error(w),d.suppressValidatorError||setTimeout(function(){throw w},0),y(w.message)}N===!0?y():N===!1?y(typeof c.message=="function"?c.message(c.fullField||c.field):c.message||(c.fullField||c.field)+" fails"):N instanceof Array?y(N):N instanceof Error&&y(N.message)}N&&N.then&&N.then(function(){return y()},function(w){return y(w)})},function(u){f(u)},s)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!L.hasOwnProperty(r.type))throw new Error(I("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var a=Object.keys(r),i=a.indexOf("message");return i!==-1&&a.splice(i,1),a.length===1&&a[0]==="required"?L.required:L[this.getType(r)]||void 0},n}();R.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");L[e]=t},R.warning=le,R.messages=ee,R.validators=L;const me=l.defineComponent({name:"SFormItem",props:Le,setup(n,{slots:e}){const t=l.inject("LABEL_DATA"),r=l.computed(()=>({"s-form__item":!0,"s-form__item--horizontal":t.value.layout==="horizontal","s-form__item--vertical":t.value.layout==="vertical"})),a=l.computed(()=>({"s-form__label":!0,"s-form__label--vertical":t.value.layout==="vertical",[`s-form__label--${t.value.labelAlign}`]:t.value.layout==="horizontal",[`s-form__label--${t.value.labelSize}`]:t.value.layout==="horizontal"})),i=l.inject(se),o=l.ref(!1),s=l.ref(""),p={validate:()=>{if(!i)return console.warn("请在Form中使用FormItem"),Promise.reject("请在Form中使用FormItem");if(!n.prop)return console.warn("如果要校验当前项，请设置prop字段"),Promise.reject("如果要校验当前项，请设置prop字段");if(!i.rules)return Promise.resolve({result:!0});const f=i.rules[n.prop]||void 0;if(!f)return Promise.resolve({result:!0});const h=i.model[n.prop];return new R({[n.prop]:f}).validate({[n.prop]:h},V=>{V?(o.value=!0,s.value=V[0].message||"校验错误"):(o.value=!1,s.value="")})}};return l.provide("FORM_ITEM_CTX",p),l.onMounted(()=>{n.prop&&(i==null||i.addItem(p))}),l.onUnmounted(()=>{n.prop&&(i==null||i.removeItem(p))}),()=>{var f;return l.createVNode("div",{class:r.value},[l.createVNode("span",{class:a.value},[n.label]),l.createVNode("div",null,[(f=e.default)==null?void 0:f.call(e)]),o.value&&l.createVNode("div",{class:"error-message"},[s.value])])}}}),ht={install(n){n.component(W.name,W),n.component(me.name,me)}},yt={modelValue:{type:String,default:""},type:{type:String,default:"text"}},St="",te=l.defineComponent({name:"SInput",props:yt,emits:["update:modelValue"],setup(n,{emit:e}){const t=l.inject("FORM_ITEM_CTX"),r=a=>{const i=a.target.value;e("update:modelValue",i),t.validate()};return()=>l.createVNode("div",{class:"s-input"},[l.createVNode("input",{class:"s-input__input",value:n.modelValue,onInput:r,type:n.type},null)])}}),vt={install(n){n.component(te.name,te)}},bt={modelValue:{type:Boolean,default:!1},title:{type:String,default:""},showClose:{type:Boolean,default:!0},width:{type:String,default:"30%"},center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1}},At="",xt={modelValue:{type:Boolean,default:!1}},jt="",Nt=l.defineComponent({name:"SBaseModal",props:xt,emits:["update:modelValue"],setup(n,{slots:e,emit:t}){const{modelValue:r}=l.toRefs(n);return()=>{var a;return l.createVNode("div",null,[r.value&&l.createVNode("div",{class:"s-base-modal"},[l.createVNode("div",{class:"s-base-modal__mask",onClick:()=>{t("update:modelValue",!1)}},null),(a=e.default)==null?void 0:a.call(e)])])}}}),ne=l.defineComponent({name:"SModal",props:bt,emits:["update:modelValue"],setup(n,{slots:e,emit:t}){const{modelValue:r,title:a,showClose:i,width:o,center:s,alignCenter:d}=l.toRefs(n),p=d.value?{marginTop:0,top:"50%",transform:"translateY(-50%)"}:null;return()=>l.createVNode(Nt,{class:"s-modal",modelValue:r.value,"onUpdate:modelValue":()=>{t("update:modelValue")}},{default:()=>{var f,h,b;return[l.createVNode("div",{class:"s-modal__container",style:{width:o.value,...p}},[e.header?(f=e.header)==null?void 0:f.call(e,{close:()=>{t("update:modelValue",!1)}}):l.createVNode("div",{class:"s-modal__header",style:{textAlign:s.value?"center":"left"}},[a.value,i.value&&l.createVNode("svg",{onClick:()=>{t("update:modelValue",!1)},class:"s-modal__close",viewBox:"0 0 1024 1024",width:"24",xmlns:"http://www.w3.org/2000/svg"},[l.createVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null)])]),l.createVNode("div",{className:"s-modal__body"},[(h=e.default)==null?void 0:h.call(e)]),l.createVNode("div",{className:"s-modal__footer"},[(b=e.footer)==null?void 0:b.call(e)])])]}})}}),wt=[ve,Se,Ce,ht,vt,{install(n){n.component(ne.name,ne)}}],Vt={version:"0.0.1",install(n){wt.forEach(e=>n.use(e))}};O.Button=z,O.Form=W,O.Input=te,O.Modal=ne,O.Pagination=J,O.Tree=U,O.default=Vt,Object.defineProperties(O,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
