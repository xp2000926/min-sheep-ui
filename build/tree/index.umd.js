(function(u,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(u=typeof globalThis<"u"?globalThis:u||self,n(u.index={},u.Vue))})(this,function(u,n){"use strict";function h(a,e=0,i=[]){return e++,a.reduce((s,t)=>{const l={...t};l.level=e,i.length>0&&i[i.length-1].level>=e&&i.pop(),i.push(l);const d=i[i.length-2];if(d&&(l.parentId=d.id),l.children){const o=h(l.children,e,i);return delete l.children,s.concat(l,o)}else return l.isLeaf=!0,s.concat(l)},[])}function k(a){const e=n.ref(h(n.unref(a))),i=d=>{const o=e.value.find(c=>c.id===d.id);o&&(o.expanded=!o.expanded)},s=n.computed(()=>{let d=[];const o=[];for(const c of e.value)d.includes(c)||(c.expanded!==!0&&(d=t(c)),o.push(c));return o}),t=(d,o=!0)=>{const c=[],p=e.value.findIndex(r=>r.id===d.id);for(let r=p+1;r<e.value.length&&d.level<e.value[r].level;r++)(o||d.level===e.value[r].level-1)&&c.push(e.value[r]);return c};return{innerData:e,toggleNode:i,expandedTree:s,getChildrenExpanded:t,toggleCheckNode:d=>{d.checked=!d.checked,t(d).forEach(r=>{r.checked=d.checked});const o=e.value.find(r=>r.id===d.parentId);if(!o)return;const c=t(o,!1);c.filter(r=>r.checked).length===c.length?o.checked=!0:o.checked=!1}}}const g={data:{type:Object,required:!0},checkable:{type:Boolean,default:!1},lineable:{type:Boolean,default:!1}},v={...g,treeNode:{type:Object,required:!0}},x=32,N=24,T=n.defineComponent({name:"STreeNode",props:v,setup(a,{slots:e}){const{lineable:i,checkable:s,treeNode:t}=n.toRefs(a),{toggleCheckNode:l,getChildrenExpanded:d}=n.inject("TREE_UTILS");return()=>{var o,c;return n.createVNode("div",{class:"s-tree-node hover:bg-slate-300 relative leading-8",style:{paddingLeft:`${N*(t.value.level-1)}px`}},[!t.value.isLeaf&&t.value.expanded&&i.value&&n.createVNode("span",{class:"s-tree-node__vline absolute w-px bg-slate-300",style:{height:`${x*d(t.value).length}px`,left:`${N*(t.value.level-1)+9}px`,top:`${x}px`}},null),t.value.isLeaf?n.createVNode("span",{style:{display:"inline-block",width:"18px"}},null):(o=e.icon)==null?void 0:o.call(e),s.value&&n.withDirectives(n.createVNode("input",{type:"checkbox","onUpdate:modelValue":p=>t.value.checked=p,onClick:()=>{l(t.value)}},null),[[n.vModelCheckbox,t.value.checked]]),(c=e.content)==null?void 0:c.call(e)])}}}),b=(a,{emit:e})=>n.createVNode("svg",{style:{width:"18px",height:"18px",display:"inline-block",transform:a.expanded?"rotate(90deg)":""},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",onClick:()=>e("onClick")},[n.createVNode("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null)]),y="",f=n.defineComponent({name:"STree",props:g,setup(a,{slots:e}){const{data:i}=n.toRefs(a),s=k(i);return n.provide("TREE_UTILS",s),()=>{var t;return n.createVNode("div",{class:"s-tree"},[(t=s.expandedTree)==null?void 0:t.value.map(l=>n.createVNode(T,n.mergeProps(a,{treeNode:l}),{content:()=>e.content?e.content(l):l.label,icon:()=>e.icon?e.icon({nodeData:l,toggleNode:s.toggleNode}):n.createVNode(b,{expanded:!!l.expanded,onClick:()=>s.toggleNode(l)},null)}))])}}}),m={install(a){a.component(f.name,f)}};u.Tree=f,u.default=m,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
